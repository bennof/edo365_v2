{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./src/core/file.js","webpack://[name]/./src/core/pageready.js","webpack://[name]/./src/core/tools.js","webpack://[name]/./src/core/url.js","webpack://[name]/./src/index.js","webpack://[name]/./src/o365/conn.js","webpack://[name]/./src/o365/index.js","webpack://[name]/./src/table/table.js","webpack://[name]/./src/table/table_view.js"],"names":["open","fun","filen","type","reader","FileReader","cb","onload","event","target","result","onerror","error","code","readAsDataURL","readAsText","save","Filen","Mime","Data","FileLink","document","createElement","startsWith","setAttribute","encodeURIComponent","btoa","createEvent","Event","initEvent","dispatchEvent","click","ReadyFired","ReadyList","ReadyEventHandlersInstalled","on","args","ctx","TypeError","setTimeout","apply","push","func","readyState","ready_run","addEventListener","window","attachEvent","readyStateChange","i","length","map","r","keys","Object","get_header","res","elem","key","value","hl","Xhttp","getAllResponseHeaders","trim","split","shift","join","get_hash","url","r1","hash","substr","decodeURIComponent","get_query","query","search","encode_base64","input","json","JSON","stringify","base64","replace","decode_base64","atob","parse","version","CONN_CFG","CONN_STATE","REFRESH_REQ","LOCATION","Connection","constructor","name","setup","cfg","location","config","save_config","sessionStorage","getItem","localStorage","tenant","login","link","params","client_id","response_type","redirect_uri","scope","nonce","state","logout","post_logout_redirect_uri","access_token","refresh_token","id","id_token","refresh","URL","parent","postMessage","desc","error_description","alert","data","save_state","body","removeChild","getElementById","bind","requests","req","pathname","logged_in","param","href","close","removeItem","email","iframe","style","display","src","appendChild","request","method","process_requests","json_request","json_req_handle","conn","XMLHttpRequest","setRequestHeader","onreadystatechange","header","status","response","send","setItem","config_to_url","show_config_link","save_json_config_file","load_json_config_file","title","box","classList","add","innerHTML","onchange","files","concat","array_map","Fun","Arr","R","Array","array2d_col","arr","idx","len","cmp","number","A","B","string","localeCompare","any","toString","Table","Name","Header","sorted","clear","add_colum","Pos","undefined","get_colum","col","indexOf","inputs","start","end","b","d","ii","offset","map1","map2","Target","map3","Inputs","In","D","I","fold","acc","Keys","fold1","Acc","fold3","filter","Cmp","out","slice","Out","select","Select","init","Query","reduce","Cidx","Colum","sort","Last","search_and_get","Value","Key","Idx","binsearch","binary_search","Left","Right","Mid","get_row_obj","Row","Obj","add_row_obj","console","log","add_obj_array","j","L","read_json","text","l","read_csv","Text","FS","No_Header","Last_Char","Field","Col","No_Quote","C","First_Row","pop","write_csv","row","escape_csv","str","open_csv","file","save_csv","file_link","Esc","o","TableView","table","querySelector","draw","caption","tab","cell","chk","innerText","onclick","on_click","update","e"],"mappings":"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","file":"jsdox.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jsdox\"] = factory();\n\telse\n\t\troot[\"jsdox\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module jsdox/file\n*/\n\n/**\n* read a file\n* @param {Function} Fun Callback function (State,Data)\n* @param {File} Filen a file object\n* @param {String} Type optional datatype\n*/\nexport function open(fun,filen,type){\n    var reader = new FileReader();\n    reader.cb = fun;\n    reader.onload = function(event) {\n        this.cb(200,event.target.result);\n    };\n    reader.onerror = function(event) {\n        this.cb(404,event.target.error.code);\n    };\n    if(type == \"DataURL\")\n        reader.readAsDataURL(filen);\n    else\n        reader.readAsText(filen);\n};\n\n\n/**\n* save file as download\n* @param Filen Filename\n* @param Mime  Mimetype\n* @param Data  data string or blob\n**/\nexport function save(Filen, Mime, Data) { // Mime text/csv;charset=utf-8\n    var FileLink = document.createElement('a');\n    if (Mime.startsWith('text'))\n        FileLink.setAttribute('href', 'data:'+Mime+',' + encodeURIComponent(Data));\n    else\n        FileLink.setAttribute('href', 'data:'+Mime+',' + btoa(Data));\n    FileLink.setAttribute('download', Filen);\n  \n    if (document.createEvent) {\n        var Event = document.createEvent('MouseEvents');\n        Event.initEvent('click', true, true);\n        FileLink.dispatchEvent(Event);\n    } else {\n        FileLink.click();\n    }\n}\n\n","var ReadyFired = false;\nvar ReadyList = [];\nvar ReadyEventHandlersInstalled = false;\n\nexport function on(cb, args, ctx = document){\n  if ( typeof cb !== \"function\" ) {\n    throw new TypeError(\"callback for on(fn) must be a function\");\n  }\n\n  if ( ReadyFired ) { // execute function\n    setTimeout(function() {cb.apply(ctx,args);}, 1);\n    return;\n  } else { // schedule for document ready\n    ReadyList.push({func: cb, args: args, ctx: ctx});\n  }\n\n  if( document.readyState === \"complete\" ){\n    setTimeout(ready_run,1);\n  }\n  else if ( !ReadyEventHandlersInstalled ) { // add handler if missing\n    if ( document.addEventListener ) {\n      document.addEventListener(\"DOMContentLoaded\", ready_run, false);\n      window.addEventListener(\"load\", ready_run, false);\n    } else {\n      document.attachEvent(\"onreadystatechange\", readyStateChange);\n      window.attachEvent(\"onload\", ready_run);\n    }\n    ReadyEventHandlersInstalled = true;\n  }\n};\n\nfunction readyStateChange() {\n  if ( document.readyState === \"complete\" ) {\n    ready_run();\n  }\n};\n\nfunction ready_run () {\n  if (!ReadyFired) {\n    ReadyFired = true;\n\n    // loop list\n    for (var i = 0; i < ReadyList.length; i++) {\n      ReadyList[i].func.apply(ReadyList[i].ctx,ReadyList[i].args); //execute\n    }\n    ReadyList = []; // clear\n  }\n};\n","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n\n\nexport function map(fun,map) {\n    var r = {}, i, keys = Object.keys(map)\n    for (i = 0; i < keys.length; i++) {\n        r[keys[i]] = fun(keys[i],map[keys[i]]);\n    }\n    return r;\n}","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module jsdox/url\n*/\n\n\n/**\n * Scan and return header fields of XHTTP requests\n * @param {*} Res a Xhttp response object\n * @returns a map of header fields\n */\nexport function get_header(res){\n    var i, elem, key, value, r={}, hl = Xhttp.getAllResponseHeaders().trim().split(/[\\r\\n]+/);\n    for ( i=0; i<hl.length; i++ ) {\n        elem = hl[i].split(': ');\n        key   = elem.shift();\n        value = elem.join(': ');\n        r[key] = value;\n    }\n    return r;\n}\n  \n/**\n * easier access to url encoded hash fields\n * @param {*} URL a url like window.location\n * @returns a map of hash values in url \n */\nexport function get_hash(url){\n    var i, r1, res={}, hash = (url.hash.substr(1)).split(\"&\");\n    for (i=0; i<hash.length; i++) {\n        r1 = hash[i].split(\"=\");\n        res[r1[0]]=decodeURIComponent(r1[1]) || r1[0];\n    }\n    return res;\n}\n  \n\n/**\n * easier access to url encoded query fields\n * @param {*} URL a url like window.location\n * @returns a map of query values in url \n */\nexport function get_query(url){\n    var i, r1, res={}, query = (url.search.substr(1)).split(\"&\");\n    for (i=0; i<query.length; i++) {\n        r1 = query[i].split(\"=\");\n        res[r1[0]]=r1[1] || r1[0];\n    }\n    return res;\n}\n\nexport function encode_base64(input){\n    var json = JSON.stringify(input);\n    var base64 = btoa(json).replace(/=+$/gm,'');\n    return base64.replace(/\\+/g, '-').replace(/\\//g,'_');\n}\n\nexport function decode_base64(input){\n    var base64 = input.replace(/-/g, '+').replace(/_/g, '/');\n    var json = atob(base64);\n    return JSON.parse(json);\n}","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\nimport * as url from './core/url';\nimport * as file from './core/file';\nimport * as pageready from './core/pageready';\n\nimport * as o365 from './o365/index';\n\nimport {Table} from './table/table';\nimport {TableView} from './table/table_view';\n\n\nexport {\n    // NameSpaces\n    url,\n    file,\n    o365,\n    pageready,\n\n    // Objects\n    Table,\n    TableView\n}\n\nexport function version(){\n    return \"JSDoX (wagtail): v0.0.1\"\n} ","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\nimport {get_hash, decode_base64, encode_base64, get_header} from '../core/url'\nimport {map} from '../core/tools';\nimport {open, save} from '../core/file';\n\n// used constants\nconst  CONN_CFG = \"_conn_cfg\";\nconst  CONN_STATE = \"_conn_state\";\nconst  REFRESH_REQ = \"_refresh_request\";\nconst  LOCATION = \"_location\";\n\n/**\n * Office 365 Connection Class\n */\nexport class Connection {\n    \n    /**\n     * constructor for a connection\n     * @param {*} name name of the connection \n     * @param {*} cfg a config object (should be undefined)\n     */\n    constructor(name, setup, cfg){\n        // set name of the connection\n        this.name = name;\n\n        var hash = get_hash(window.location); //store all values passed as hash (not seen by server)\n        \n        // try to get a config\n        if(cfg) { // config is passed directly (unsecure)\n            this.config = cfg;\n            this.save_config(); // safe data for session\n        } else if (hash[this.name+CONN_CFG]){ // decode config from hash\n            this.config = decode_base64(hash[this.name + CONN_CFG]);\n            this.save_config(); // safe data for session\n        } else if ((cfg = sessionStorage.getItem(this.name + CONN_CFG)) != null){ // get data from session\n            this.config = JSON.parse(cfg);\n        } else if ((cfg = localStorage.getItem(this.name + CONN_CFG)) != null){ // get data from store\n            this.config = JSON.parse(cfg);\n            this.save_config(); // safe data for session\n        } else { // use empty setting\n            this.config = {\n                tenant: \"\", \n                login: { \n                    link: \"\",\n                    params: {\n                        client_id: \"\",\n                        response_type: \"\",\n                        redirect_uri: \"\",\n                        scope: \"\",\n                        nonce: \"\",\n                        state: \"\"\n                    }\n                },\n                logout: {\n                    link: \"\",\n                    params: {\n                        post_logout_redirect_uri: \"\"\n                    }\n                }\n\n            }\n            this.save_config(); // safe data for session\n        }\n\n        // checking for login information\n        var state = localStorage.getItem(this.name + CONN_STATE) || [];\n        // state info from url hash overrides saved state\n        this.access_token = hash.access_token || state.access_token || null;\n        this.refresh_token = hash.refresh_token || state.refresh_token || null;\n        this.id = state.id || null;\n        if (hash.id_token){\n            this.id = decode_base64(hash.id_token.split('.')[1]); // JWT data element\n        }\n\n\n        if (hash.state){\n            // a refresh is send\n            state = decode_base64(hash.state);\n            if (state.refresh && state.refresh == true){\n                var url = new URL(window.location);\n                url.hash='';\n                if (hash.error) {\n                    window.parent.postMessage({state: hash.error, desc: hash.error_description},url);\n                } else {\n                    window.parent.postMessage({state: 'ok', access_token: params.access_token},url);\n                }\n                return;\n            }\n        } else {\n            state = {};\n        }\n\n        // error \n        if (hash.error) {\n            alert(hash.error+'\\n'+hash.error_description);\n            return;\n        }\n\n        // setup message handler for refresh\n        window.addEventListener('message', function(event){\n            if(event.data.state){\n                if(event.data.state === 'ok'){\n                    this.access_token = event.data.access_token;\n                    this.save_state();\n                } else {\n                    alert(event.data.state+'\\n'+event.data.error_description);\n                }\n                document.body.removeChild(document.getElementById(this.name+\"_refresh\"));\n            }\n        }.bind(this),false);\n\n        this.save_state(); // save state\n        this.requests = []; // store request, for serialisation\n        this.req = false;\n\n        // check for state arguments\n        if (state.location && window.location.pathname != state.location) {\n            window.location.pathname = state.location;\n        }\n\n        if(setup){\n            if(setup.logged_in && this.access_token){\n                setup.logged_in(this);\n            }\n        }\n    }\n\n    /**\n     * open a connection / login\n     */\n    open(){\n        if(!this.config.login.link){\n            alert(\"Incomplet connection config - please load or create a configuration\");\n            return;\n        }\n        // build link\n        var link = this.config.login.link;\n        for (var param in this.config.login.params) {\n            link += encodeURIComponent(param)+\"=\"\n                +encodeURIComponent(this.config.login.params[param])+\"&\";\n        }\n        link += encodeURIComponent(\"state\")+\"=\"\n                +encode_base64({location: window.location.pathname})+\"&\";\n\n        window.location.href = link;\n    }\n\n    /**\n     * close connection / logout\n     */\n    close(){\n        sessionStorage.removeItem(this.name+CONN_STATE); // delete session storage\n        // unset all values\n        this.access_token = null;\n        this.refresh_token = null;\n        this.id = null;\n\n        // build link\n        var link = this.config.logout.link;\n        for (var param in this.config.logout.params) {\n            link += encodeURIComponent(param)+\"=\"\n                +encodeURIComponent(this.config.logout.params[param])+\"&\";\n        }\n        window.location.href = link;\n    }\n\n    /**\n     * refresh connection\n     */\n    refresh(){\n        // build link\n        var link = this.config.login.link;\n        for (var param in this.config.login.param) {\n            link += encodeURIComponent(param)+\"=\"\n                +encodeURIComponent(this.config.login.param[param])+\"&\";\n        }\n        link += encodeURIComponent('prompt')+\"=\" //avoid login prompt\n            +encodeURIComponent('none')+\"&\";\n        if (this.id.email)\n            link += encodeURIComponent('login_hint')+\"=\"\n                +encodeURIComponent(this.id.email)+\"&\";\n        link += encodeURIComponent(state)+\"=\"\n            +encode_base64({refresh: true, location: window.location.pathname})+\"&\";\n\n        if(document.getElementById(this.name+\"_refesh\"))\n            return; // avoid multiple refreshs\n\n        // create hidden iframe\n        var iframe = document.createElement('iframe');\n        iframe.id = this.name+\"_refesh\";\n        iframe.style.display = \"none\";\n        iframe.src = link;\n        document.body.appendChild(iframe);\n    }\n\n    /**\n     * perform a request async\n     * @param {*} fun \n     * @param {*} method \n     * @param {*} url \n     * @param {*} body\n     * @param {*} param \n     */\n    request(fun, method, url, body, param){\n        this.requests.push({\n            fun: fun,\n            method: method,\n            url: url,\n            body: body,\n            param: param\n        });\n        this.process_requests();\n    }\n\n    json_request(fun, method, url, body, param){\n        this.requests.push({\n            fun: json_req_handle.bind({conn: this,fun: fun}),\n            method: method,\n            url: url,\n            body: body,\n            param: param\n        });\n        this.process_requests();\n    }\n\n    /**\n     * perform requests\n     */\n    process_requests(){\n        //check for open requests\n        if(this.req)\n            return; \n        var r = this.requests.shift();\n        if (r){\n            this.req = true\n            var req = new XMLHttpRequest();\n            req.open(r.method, r.url, true);\n            req.setRequestHeader(\"Authorization\", \"Bearer \"+this.access_token);\n            map(req.setRequestHeader.bind(req),r.param);\n            req.conn = this;\n            req.fun = r.fun;\n            req.body = r.body;\n            req.onreadystatechange = function(){\n                if(req.readyState === 4 ){\n                    //missing handle refresh error\n                    var header = get_header(req);\n                    req.fun(req.status, req.response, header);\n                    req.conn.req = false;\n                    req.conn.process_requests();\n                }\n            }\n            if (r.body)\n                req.send(r.body);\n            else\n                req.send();\n            return req;\n        }\n    }\n\n\n\n    /**\n     * save config \n     * @param {*} target to save to (default is sessionStorage)\n     */\n    save_config(target = sessionStorage){\n        target.setItem(this.name+CONN_CFG,JSON.stringify(this.config));\n    }\n\n    /**\n     * save state\n     * @param {*} target to save to (default is sessionStorage)\n     */\n    save_state(target = sessionStorage){\n        target.setItem(this.name+CONN_STATE,JSON.stringify({access_token: this.access_token, refresh_token: this.refresh_token, id: this.id}));\n    }\n\n    /**\n     * convert config to a url hash element\n     */\n    config_to_url(){\n        return this.name+CONN_CFG+\"=\"+encode_base64(this.config);\n    }\n\n    show_config_link(){\n        var url = new URL(window.location.href)\n        url.hash='#'+conn.config_to_url();\n        alert(url.href);\n    }\n\n\n    save_json_config_file(name) {\n        save(name,'text/json',JSON.stringify(this.config));\n    }\n\n\n    load_json_config_file(title){\n        if(document.getElementById(this.name+'_open_dialog'))\n            return;\n        var box = document.createElement('div');\n        box.id = this.name+'_open_dialog';\n        box.classList.add('prompt');\n        var header = document.createElement('h1');\n        header.innerHTML = title;\n        box.appendChild(header);\n        var input = document.createElement('input');\n        input.type = 'file';\n        box.appendChild(input);\n        var conn = this;\n        input.onchange = function(){\n            open(function(state,cfg){\n                if(state==200){\n                    this.config = JSON.parse(cfg);\n                    this.save_config();\n                } else {\n                    alert('ERRROR: '+ state + '\\n' + cfg)\n                }\n            }.bind(conn), this.files[0]);\n            document.body.removeChild(box);\n        }\n        document.body.appendChild(box);\n    }\n\n\n}\n\n\nfunction json_req_handle(state,body,header){\n    if(state === 200) {\n        var json = JSON.parse(body)\n        this.data = (this.data) ? this.data.concat(json.value) : json.value;\n        if(json[\"@odata.nextLink\"]) { // if there is more data\n            this.conn.request(json_req_handle.bind(this),'GET',json[\"@odata.nextLink\"],null,null);\n        } else { //transfer complete\n            this.fun(state,this.data, header);\n        }\n    } else {\n        this.fun(state,(this.data)? this.data:[],header);\n    }\n}","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\nimport { Connection } from './conn';\n\n\nexport {\n    Connection\n}","/** \n* @module jsmat/data\n*/\n\n\nexport function array_map(Fun,Arr){\n    var i, R = new Array(Arr.length);\n    for (i=0;i<Arr.length;i++)\n        R[i] = Fun(Arr[i],i);\n    return R;\n};\n\nexport function array2d_col(arr,idx) {\n    var len = arr.length;\n    var r = new Array(len);\n    for(var i=0; i<len; i++)\n        r[i]=arr[i][idx];\n    return r;\n}\n\n\nexport const cmp ={ \n    number: function(A, B) { return A-B; },\n    string: function(A, B) { return A.localeCompare(B); },\n    any: function(A, B) { return A.toString().localeCompare(B.toString()); }\n}\n\n\nexport class Table {\n\n    constructor(Name, Header){\n        this.name = Name;\n        this.header = Header || [];\n        this.data = [];\n        this.sorted = -1; // sorted column\n    }\n\n    clear() {\n        this.data = [];\n        this.sorted = -1;\n    }\n\n    length() {\n        return this.data.length;\n    }\n\n    add_colum(Name,Data) {\n        this.header.push(Name);\n        var Pos = this.header.length -1;\n        for (var i=0;i<this.data.length; i++){\n            if(Data && Data[i]) {\n                this.data[i][Pos] = Data[i];\n            } else {\n                this.data[i][Pos] = undefined;\n            }\n        }\n    }\n\n    get_colum (name) {\n        var i, r = new Array(this.data.length), col = (typeof name == \"string\") ? this.header.indexOf(name) : name;\n        for( i=0; i<this.data.length; i++){\n            r[i] = this.data[i][col];\n        }\n        return r;\n    }\n\n    map(Fun, target, inputs, start, end){\n        if (end == undefined || end > this.data.length || end < 0) end = this.data.length;\n        if (start == undefined) start = 0;\n            \n        var data = this.data, b;        \n        \n        if(target){\n            if (typeof target == \"string\") target = this.header.indexOf(target);\n            if(inputs){\n                inputs = array_map(function(d){ \n                        return (typeof d == \"string\") ? this.header.indexOf(d) : d; \n                    },inputs);\n                for (var i=start; i<end; i++){\n                    b = array_map( function(ii){return this[ii];}.bind(data[i]),inputs);\n                    data[i][target] = Fun.apply(null,b.concat([data[i],i]));\n                }\n            } else {\n                for (i=offset; i<length; i++){\n                    data[i][target] = Fun(data[i],i);\n                }\n            }\n        } else {\n            for (var i = start; i < end; i++) {\n                data[i] = Fun(data[i],i);\n            }\n        }\n    }\n\n    // deprecated\n    map1(Fun, offset, length) {\n        if (length == undefined || length > this.data.length || length < 0) length = this.data.length;\n        if (offset == undefined) offset = 0;\n        var Data = this.data, i;\n        for (i = offset; i < length; i++) {\n            Data[i] = Fun(Data[i],i);\n        }\n    }\n\n    // deprecated\n    map2(Fun, Target, offset, length){\n        if (length == undefined || length > this.data.length) length = this.data.length;\n        if (offset == undefined) offset = 0;\n        var i, Data = this.data, col = (typeof Target == \"string\") ? this.header.indexOf(Target) : Target;\n        for (i=offset;i<length;i++){\n            Data[i][col] = Fun(Data[i],i);\n        }\n    }\n\n    // deprecated\n    map3(Fun,Target,Inputs, offset, length){\n        if (length == undefined || length > this.data.length) length = this.data.length;\n        if (offset == undefined) offset = 0;\n        var Data = this.data, i, B,\n            In = array_map(function(D){\n                return (typeof D == \"string\") ? this.header.indexOf(D) : D; },Inputs),\n            col = (typeof D == \"string\") ? this.header.indexOf(Target) : Target;\n        for (i=offset;i<length;i++){\n            B = array_map( function(I){return this[I];}.bind(Data[i]),In);\n            Data[i][col] = Fun.apply(null,[Data[i]].concat(B));\n        }\n    }\n\n    fold(Fun, acc, inputs, start, end){\n        if (end == undefined || end > this.data.length || end < 0) end = this.data.length;\n        if (start == undefined) start = 0;\n            \n        var data = this.data, b; \n        if(inputs){\n            inputs = array_map(function(D){\n                return (typeof d == \"string\") ? this.header.indexOf(d) : d; },inputs);\n            for (i = 0; i < Data.length; i++) {\n                b = array_map( function(ii){ return this[ii]; }.bind(Data[i]), inputs);\n                b = [acc].concat(b);\n                acc = Fun.apply(null,b.concat([data[i],i]));\n            }\n        } else {\n            for (var i = 0; i < Keys.length; i++) {\n                acc = Fun(acc,Data[i],i);\n            } \n        }\n        return acc;\n    }\n      \n    // deprecated\n    fold1(Fun, Acc){\n        var Data = this.data, i;\n        for (i = 0; i < Keys.length; i++) {\n            Acc = Fun(Data[i],Acc);\n        }\n        return Acc;\n    }\n\n    // deprecated\n    fold3(Fun, Acc, Inputs) {\n        var Data = this.data, i, B,\n            In = array_map(function(D){\n                return (typeof D == \"string\") ? this.header.indexOf(D) : D; },Inputs);\n        for (i = 0; i < Data.length; i++) {\n            B = array_map( function(I){return this[I];}.bind(Data[i]),In);\n            B.push(Acc);\n            Acc = Fun.apply(null,B);\n        }\n        return Acc;\n    }\n\n    /**\n     * Filter table and create a new table with filtered data\n     * @param {*} Cmp \n     * @param {*} input \n     * @param {*} query \n     */\n    filter(Cmp,input,query){\n        if (typeof input == \"string\") input = this.header.indexOf(input);\n        var out = new Table(this.name+\" filter\",this.header.slice(0));\n        var data = this.data, i;\n        \n        if (input){\n            for (i = 0; i < Data.length; i++) {\n                if (0 == Cmp(Data[i][input],query))\n                    Out.data.push(Data[i]);\n            }\n        } else {\n            for (i = 0; i < Data.length; i++) {\n                if (0 == Cmp(Data[i],query))\n                    Out.data.push(Data[i]);\n            }\n        }\n        return Out;\n    }\n    \n    /**\n     * seclect colums and rows with a filter \n     * @param {*} Fun \n     * @param {*} input \n     * @param {*} query \n     */\n    select(Fun,input,query){\n        var Data = this.data, i, B, R,\n            In = array_map(function(D){\n                return (typeof D == \"string\") ? header.indexOf(D) : D; },Select);\n        var Out = init(this.name+\" filter\",array_map(function(I){return this.header[I]},In));\n        for (i = 0; i < Data.length; i++) {\n            B = array_map( function(I){return this[I];}.bind(Data[i]),In);\n            B.push(Query);\n            R = Fun.apply(null,B);\n            if(R)\n                Out.data.push(R);\n        }\n        return Out;\n    }\n\n    /**\n     * Reduce table \n     * @param {*} Fun \n     * @param {*} input \n     */\n    reduce(Fun,input){\n        var Cidx = (typeof Colum === \"string\" ) ? this.header.indexOf(Colum) : Colum;\n        if (!this.sorted || this.sorted != Cidx)\n            this.sort(Fun,Cidx);\n        var Data = this.data, i;\n        var Last=Data[0][Cidx], Out = new Table(this.name+\" reduce \"+Colum,this.header.slice(0));\n        Out.data.push(Data[0]);\n        for (i = 1; i < Data.length; i++) {\n            if (0 != Fun(Data[i][Cidx],Last))\n                Out.data.push(Data[i]);\n            Last = Data[i][Cidx];\n        }\n        return Out;\n    }\n     \n    //// SORT AND SEARCH WITH HELPERS\n    \n    sort(Fun, Colum){\n        var Cidx = (typeof Colum === \"string\" ) ? this.header.indexOf(Colum) : Colum;\n        var Cmp = function(A,B) {\n            return this.cmp(A[this.idx],B[this.idx]);\n        }\n        this.data = this.data.sort(Cmp.bind({idx: Cidx, cmp: Fun}));\n        this.sorted = Cidx;\n        return Cidx;\n    }\n      \n    search_and_get(Fun,Value,Colum,Key){\n        var Idx = this.search(Fun,Value,Colum);\n        if (Idx >= 0) {\n            var Cidx = (typeof Key === \"string\" ) ? this.header.indexOf(Key) : Key;\n            return this.data[Idx][Cidx];\n        }\n    }\n      \n    search(Fun,Value,Colum){\n        var Cidx;\n        if (typeof Colum === \"string\" )\n            Cidx = this.header.indexOf(Colum);\n        else\n            Cidx = Colum;\n        if( this.sorted && this.sorted == Cidx ){ //binary binsearch\n            return this.binsearch(Fun, Value, Cidx);\n        } else {\n            var i, Data=this.data;\n            for (i=0; i<Data.length; i++){\n                if(0 == Fun(Data[i][Cidx],Value)){\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n      \n    binary_search(Fun,Value,Colum){\n        var Cidx = (typeof Colum === \"string\" ) ? this.header.indexOf(Colum) : Colum;\n        if (!this.sorted || this.sorted != Cidx)\n            sort(Fun,Cidx,this);\n        return this.binsearch(Fun, Value, Cidx);\n    }\n      \n    binsearch(Fun, Value, Cidx){\n        var Left = 0, Right = this.data.length - 1, Mid, R, Data = this.data;\n        while (Left <= Right) { // Interval\n          Mid = Left + ((Right - Left) / 2); // half interval\n          //console.log(Value,Data[Mid]);\n          R = Fun(Value,Data[Mid][Cidx]);\n          if (R == 0) // success\n            return Mid;\n          else\n            if (R < 0) // lower interval\n              Right = Mid - 1;\n            else // higher interval\n              Left = Mid + 1;\n        }\n        return -1;\n    }\n\n    get_row_obj(Row){\n        var Obj = {};\n        for(var i=0; i<this.header.length; i++){\n            Obj[this.header[i]] = this.data[Row][i];\n        }\n        return Obj\n    }\n\n    add_row_obj(Obj,Idx = -1) {\n        var Keys = Object.keys(Obj);\n        if (Idx < 0){\n            Idx = this.data.length;\n            this.data.push(new Array(this.header.length));\n        }\n\n        for(var i=0; i<Keys.length; i++ ){\n            var Pos = this.header.indexOf(Keys[i]);\n            if(Pos == -1){\n                console.log(\"TR_Table: Missing key: \"+Keys[i]);\n            } else {\n                this.data[Idx][Pos] = Obj[Keys[i]];\n            }\n        }\n    }\n     \n    add_obj_array(Obj) {\n         var i,j, L, Keys, Idx;\n         for(i=0; i<Obj.length; i++){\n            L = new Array(this.header.length);\n            Keys = Object.keys(Obj[i]);\n            for(j=0; j<Keys.length; j++ ){\n                Idx = this.header.indexOf(Keys[j]);\n                if (Idx >=0 ) {\n                    L[Idx] = Obj[i][Keys[j]];\n                }\n            }\n            this.data.push(L);\n        }\n    }\n\n    read_json(text) {\n        var l, i, j, json = JSON.parse(text);\n        for(i=0; i < json.length; i++){\n            l = new Array(this.header.length);\n            for(j=0; j<this.header.length; j++ ){\n                l[j] = json[i][this.header[j]];\n            }\n            this.data.push(l);\n        }\n        \n    }\n\n    read_csv(Text, FS, No_Header) {\n        var Last_Char = \"\", Field = \"\", Obj = [\"\"], Col = 0, Row = 0, No_Quote = !0, C, j, First_Row = (No_Header)? 0 : !0;\n        this.data = [];\n        this.header = [];\n        this.sorted = -1;\n        this.data.push(Obj);\n    \n        for (j = 0; j < Text.length; j++) {\n            C = Text[j]; //get current char\n            if (\"\\\"\" === C) { // if quote\n                if (No_Quote && C === Last_Char)\n                    Field += C; // if previous was a quote add quote to field string\n                No_Quote = !No_Quote; // switch boolean\n            }\n            else if (FS === C && No_Quote) { // if not quoted FS\n                if (First_Row) {\n                    this.header[Col++] = Field;\n                }\n                else {\n                    Obj[Col++] = Field;\n                }\n                C = Field = \"\";\n            }\n            else if (\"\\n\" === C && No_Quote) { // if not quoted line end\n                    if (\"\\r\" === Last_Char)\n                        Field = Field.slice(0, -1); //remove carriage return\n                    if (First_Row) {\n                        First_Row = !First_Row;\n                        this.header[Col] = Field;\n                        C = Field = \"\";\n                    }\n                    else {\n                        Obj[Col] = Field;\n                        this.data[++Row] = Obj = [];\n                    }\n                    C = Field = \"\";\n                    Col = 0;\n                }\n                else {\n                    Field += C;\n                }\n                Last_Char = C;\n        }\n        if (Col != 0) {\n            Obj[Col] = Field;\n        }\n        if (Obj.length != this.header.length)\n            this.data.pop();\n    }\n    \n    write_csv(FS) {\n        var text = \"\", row;\n        if (this.header) {\n            for (var i = 0; i < this.header.length; i++) {\n                if (i > 0)\n                    text += FS;\n                text += escape_csv(this.header[i], FS);\n            }\n            text += \"\\r\\n\";\n        }\n        for (var i = 0; i < this.data.length; i++) {\n            row = this.data[i];\n            for (var j = 0; j < row.length; j++) {\n                if (j > 0)\n                    text += FS;\n                text += escape_csv(str(row[j]), FS);\n            }\n            text += \"\\r\\n\";\n        }\n        return text;\n    }\n\n    open_csv(fun, file) {\n        var reader = new FileReader();\n        reader.onload = function(event) {\n            this.read_csv(event.target.result, ';')\n            fun();\n        };\n        reader.onerror = function(event) {\n            alert(event.target.error);\n        };\n        reader.readAsText(file);\n    }\n\n    save_csv(){\n        var file_link = document.createElement('a');\n        file_link.setAttribute('href', 'data: text/csv,' + encodeURIComponent(this.write_csv(';')));\n        if (document.createEvent) {\n            var event = document.createEvent('MouseEvents');\n            event.initEvent('click', true, true);\n            file_link.dispatchEvent(event);\n        } else {\n            file_link.click();\n        }\n    }\n};\n\n\n\n// HELPER FUNCTIONS\n\nfunction escape_csv(Value, FS) {\n    var R = \"\", C, Esc = false;\n    if (!Value)\n        return \"\";\n    for (var j = 0; j < Value.length; j++) {\n        C = Value[j];\n        if (C == \"\\\"\") {\n            R += C;\n            R += C;\n            Esc = true;\n        }\n        else if (C == \"\\n\" || C == \"\\r\" || C == FS) {\n            R += C;\n            Esc = true;\n        }\n        else {\n            R += C;\n        }\n    }\n    if (Esc) {\n        return \"\\\"\" + R + \"\\\"\";\n    }\n    else {\n        return R;\n    }\n}\n\nfunction str(o) {\n    switch (o) {\n        case null:\n          return \"null\";\n        case undefined:\n          return \"undefined\";\n        default:\n          return o.toString();\n    }\n}","\nimport {Table} from './table';\n\nexport class TableView {\n\n    constructor(table, target){\n        this.table = table \n        if(typeof target == 'string')\n            target = document.querySelector(target);\n        this.target = target\n    }\n\n    draw(){\n        var caption = this.target.querySelector('caption').innerHTML;\n        var tab = this.target;\n        tab.innerHTML = \"\";\n        var cell, chk, row = document.createElement('tr');\n        cell = document.createElement('td');\n        chk = document.createElement('input');\n        chk.type = \"checkbox\"; \n        chk.name = this.target.id+\"_chk_all\"; \n        chk.id =  chk.name; \n        cell.appendChild(chk)\n        row.appendChild(cell);\n        for(var i=0;i<this.table.header.length;i++){\n            cell = document.createElement('th');\n            cell.innerText = this.table.header[i];\n            row.appendChild(cell);\n        }\n        tab.appendChild(row);\n        for(var i=0; i<this.table.length(); i++){\n            row = document.createElement('tr');\n            cell = document.createElement('td');\n            chk = document.createElement('input');\n            chk.type = \"checkbox\"; \n            chk.name = this.target.id+\"_chk_\"+i+\"_\"+j; \n            chk.id =  chk.name; \n            cell.appendChild(chk)\n            row.appendChild(cell);\n            for(var j=0; j<this.table.header.length; j++){\n                cell = document.createElement('td');\n                cell.innerText = this.table.data[i][j];\n                row.appendChild(cell);\n            }\n            tab.appendChild(row);\n\n            tab.onclick(this.on_click)\n        }\n    }\n\n    update(){}\n\n    on_click(e){\n        console.log(e);\n    }\n}"],"sourceRoot":""}