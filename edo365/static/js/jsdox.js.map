{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./src/core/file.js","webpack://[name]/./src/core/tools.js","webpack://[name]/./src/core/url.js","webpack://[name]/./src/index.js","webpack://[name]/./src/o365/conn.js","webpack://[name]/./src/o365/index.js","webpack://[name]/./src/table/table.js","webpack://[name]/./src/table/table_view.js"],"names":["open","fun","filen","type","reader","FileReader","cb","onload","event","target","result","onerror","error","code","readAsDataURL","readAsText","save","Filen","Mime","Data","FileLink","document","createElement","startsWith","setAttribute","encodeURIComponent","btoa","createEvent","Event","initEvent","dispatchEvent","click","map","r","i","keys","Object","length","get_header","res","elem","key","value","hl","Xhttp","getAllResponseHeaders","trim","split","shift","join","get_hash","url","r1","hash","substr","decodeURIComponent","get_query","query","search","encode_base64","input","json","JSON","stringify","base64","replace","decode_base64","atob","parse","version","CONN_CFG","CONN_STATE","REFRESH_REQ","LOCATION","Connection","constructor","name","setup","cfg","window","location","config","save_config","sessionStorage","getItem","localStorage","tenant","login","link","params","client_id","response_type","redirect_uri","scope","nonce","state","logout","access_token","refresh_token","id","id_token","refresh","URL","parent","postMessage","desc","error_description","alert","addEventListener","data","save_state","body","removeChild","getElementById","bind","requests","req","pathname","logged_in","param","href","close","removeItem","email","iframe","style","display","src","appendChild","request","method","push","process_requests","json_request","json_req_handle","conn","XMLHttpRequest","setRequestHeader","onreadystatechange","readyState","header","status","response","send","setItem","config_to_url","base64UrlEncode","load_json_file","title","box","classList","add","innerHTML","onchange","files","concat","array_map","Fun","Arr","R","Array","array2d_col","arr","idx","len","cmp","number","A","B","string","localeCompare","any","toString","Table","Name","Header","sorted","clear","add_colum","Pos","undefined","get_colum","col","indexOf","inputs","start","end","b","d","ii","apply","offset","map1","map2","Target","map3","Inputs","In","D","I","fold","acc","Keys","fold1","Acc","fold3","filter","Cmp","out","slice","Out","select","Select","init","Query","reduce","Cidx","Colum","sort","Last","search_and_get","Value","Key","Idx","binsearch","binary_search","Left","Right","Mid","get_row_obj","Row","Obj","add_row_obj","console","log","add_obj_array","j","L","read_json","text","l","read_csv","Text","FS","No_Header","Last_Char","Field","Col","No_Quote","C","First_Row","pop","write_csv","row","escape_csv","str","open_csv","file","save_csv","file_link","Esc","o","TableView","table","querySelector","draw","caption","tab","cell","chk","innerText","onclick","on_click","update","e"],"mappings":"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","file":"jsdox.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jsdox\"] = factory();\n\telse\n\t\troot[\"jsdox\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module jsdox/file\n*/\n\n/**\n* read a file\n* @param {Function} Fun Callback function (State,Data)\n* @param {File} Filen a file object\n* @param {String} Type optional datatype\n*/\nexport function open(fun,filen,type){\n    var reader = new FileReader();\n    reader.cb = fun;\n    reader.onload = function(event) {\n        this.cb(200,event.target.result);\n    };\n    reader.onerror = function(event) {\n        this.cb(404,event.target.error.code);\n    };\n    if(type == \"DataURL\")\n        reader.readAsDataURL(filen);\n    else\n        reader.readAsText(filen);\n};\n\n\n/**\n* save file as download\n* @param Filen Filename\n* @param Mime  Mimetype\n* @param Data  data string or blob\n**/\nexport function save(Filen, Mime, Data) { // Mime text/csv;charset=utf-8\n    var FileLink = document.createElement('a');\n    if (Mime.startsWith('text'))\n        FileLink.setAttribute('href', 'data:'+Mime+',' + encodeURIComponent(Data));\n    else\n        FileLink.setAttribute('href', 'data:'+Mime+',' + btoa(Data));\n    FileLink.setAttribute('download', Filen);\n  \n    if (document.createEvent) {\n        var Event = document.createEvent('MouseEvents');\n        Event.initEvent('click', true, true);\n        FileLink.dispatchEvent(Event);\n    } else {\n        FileLink.click();\n    }\n}\n\n","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n\n\nexport function map(fun,map) {\n    var r = {}, i, keys = Object.keys(map)\n    for (i = 0; i < keys.length; i++) {\n        r[keys[i]] = fun(keys[i],map[keys[i]]);\n    }\n    return r;\n}","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\n/** \n* @module jsdox/url\n*/\n\n\n/**\n * Scan and return header fields of XHTTP requests\n * @param {*} Res a Xhttp response object\n * @returns a map of header fields\n */\nexport function get_header(res){\n    var i, elem, key, value, r={}, hl = Xhttp.getAllResponseHeaders().trim().split(/[\\r\\n]+/);\n    for ( i=0; i<hl.length; i++ ) {\n        elem = hl[i].split(': ');\n        key   = elem.shift();\n        value = elem.join(': ');\n        r[key] = value;\n    }\n    return r;\n}\n  \n/**\n * easier access to url encoded hash fields\n * @param {*} URL a url like window.location\n * @returns a map of hash values in url \n */\nexport function get_hash(url){\n    var i, r1, res={}, hash = (url.hash.substr(1)).split(\"&\");\n    for (i=0; i<hash.length; i++) {\n        r1 = hash[i].split(\"=\");\n        res[r1[0]]=decodeURIComponent(r1[1]) || r1[0];\n    }\n    return res;\n}\n  \n\n/**\n * easier access to url encoded query fields\n * @param {*} URL a url like window.location\n * @returns a map of query values in url \n */\nexport function get_query(url){\n    var i, r1, res={}, query = (url.search.substr(1)).split(\"&\");\n    for (i=0; i<query.length; i++) {\n        r1 = query[i].split(\"=\");\n        res[r1[0]]=r1[1] || r1[0];\n    }\n    return res;\n}\n\nexport function encode_base64(input){\n    var json = JSON.stringify(input);\n    var base64 = btoa(json).replace(/=+$/gm,'');\n    return base64.replace(/\\+/g, '-').replace(/\\//g,'_');\n}\n\nexport function decode_base64(input){\n    var base64 = input.replace(/-/g, '+').replace(/_/g, '/');\n    var json = atob(base64);\n    return JSON.parse(json);\n}","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\nimport * as url from './core/url';\nimport * as file from './core/file';\n\nimport * as o365 from './o365/index';\n\nimport {Table} from './table/table';\nimport {TableView} from './table/table_view';\n\n\nexport {\n    // NameSpaces\n    url,\n    file,\n    o365,\n\n    // Objects\n    Table,\n    TableView\n}\n\nexport function version(){\n    return \"JSDoX (wagtail): v0.0.1\"\n} ","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\nimport {get_hash, decode_base64, encode_base64, get_header} from '../core/url'\nimport {map} from '../core/tools';\nimport {open} from '../core/file';\n\n// used constants\nconst  CONN_CFG = \"_conn_cfg\";\nconst  CONN_STATE = \"_conn_state\";\nconst  REFRESH_REQ = \"_refresh_request\";\nconst  LOCATION = \"_location\";\n\n/**\n * Office 365 Connection Class\n */\nexport class Connection {\n    \n    /**\n     * constructor for a connection\n     * @param {*} name name of the connection \n     * @param {*} cfg a config object (should be undefined)\n     */\n    constructor(name, setup, cfg){\n        // set name of the connection\n        this.name = name;\n\n        var hash = get_hash(window.location); //store all values passed as hash (not seen by server)\n        \n        // try to get a config\n        if(cfg) { // config is passed directly (unsecure)\n            this.config = cfg;\n            this.save_config(); // safe data for session\n        } else if (hash[this.name+CONN_CFG]){ // decode config from hash\n            this.config = decode_base64(hash[this.name + CONN_CFG]);\n            this.save_config(); // safe data for session\n        } else if ((cfg = sessionStorage.getItem(this.name + CONN_CFG)) != null){ // get data from session\n            this.config = JSON.parse(cfg);\n        } else if ((cfg = localStorage.getItem(this.name + CONN_CFG)) != null){ // get data from store\n            this.config = JSON.parse(cfg);\n            this.save_config(); // safe data for session\n        } else { // use empty setting\n            this.config = {\n                tenant: \"\", \n                login: { \n                    link: \"\",\n                    params: {\n                        client_id: \"\",\n                        response_type: \"\",\n                        redirect_uri: \"\",\n                        scope: \"\",\n                        nonce: \"\",\n                        state: \"\"\n                    }\n                },\n                logout: {\n                    link: \"\",\n                    params: {}\n                }\n\n            }\n            this.save_config(); // safe data for session\n        }\n\n        // checking for login information\n        var state = localStorage.getItem(this.name + CONN_STATE) || [];\n        // state info from url hash overrides saved state\n        this.access_token = hash.access_token || state.access_token || null;\n        this.refresh_token = hash.refresh_token || state.refresh_token || null;\n        this.id = state.id || null;\n        if (hash.id_token){\n            this.id = decode_base64(hash.id_token.split('.')[1]); // JWT data element\n        }\n\n\n        if (hash.state){\n            // a refresh is send\n            state = decode_base64(hash.state);\n            if (state.refresh && state.refresh == true){\n                var url = new URL(window.location);\n                url.hash='';\n                if (hash.error) {\n                    window.parent.postMessage({state: hash.error, desc: hash.error_description},url);\n                } else {\n                    window.parent.postMessage({state: 'ok', access_token: params.access_token},url);\n                }\n                return;\n            }\n        } else {\n            state = {};\n        }\n\n        // error \n        if (hash.error) {\n            alert(hash.error+'\\n'+hash.error_description);\n            return;\n        }\n\n        // setup message handler for refresh\n        window.addEventListener('message', function(event){\n            if(event.data.state){\n                if(event.data.state === 'ok'){\n                    this.access_token = event.data.access_token;\n                    this.save_state();\n                } else {\n                    alert(event.data.state+'\\n'+event.data.error_description);\n                }\n                document.body.removeChild(document.getElementById(this.name+\"_refresh\"));\n            }\n        }.bind(this),false);\n\n        this.save_state(); // save state\n        this.requests = []; // store request, for serialisation\n        this.req = false;\n\n        // check for state arguments\n        if (state.location && window.location.pathname != state.location) {\n            window.location.pathname = state.location;\n        }\n\n        if(setup){\n            if(setup.logged_in && this.access_token){\n                setup.logged_in(this);\n            }\n        }\n    }\n\n    /**\n     * open a connection / login\n     */\n    open(){\n        if(!this.config.login.link){\n            alert(\"Incomplet connection config - please load or create a configuration\");\n            return;\n        }\n        // build link\n        var link = this.config.login.link;\n        for (var param in this.config.login.params) {\n            link += encodeURIComponent(param)+\"=\"\n                +encodeURIComponent(this.config.login.params[param])+\"&\";\n        }\n        link += encodeURIComponent(\"state\")+\"=\"\n                +encode_base64({location: window.location.pathname})+\"&\";\n\n        window.location.href = link;\n    }\n\n    /**\n     * close connection / logout\n     */\n    close(){\n        sessionStorage.removeItem(this.name+CONN_STATE); // delete session storage\n        // unset all values\n        this.access_token = null;\n        this.refresh_token = null;\n        this.id = null;\n\n        // build link\n        var link = this.config.logout.link;\n        for (var param in this.config.logout.params) {\n            link += encodeURIComponent(param)+\"=\"\n                +encodeURIComponent(this.config.logout.params[param])+\"&\";\n        }\n        window.location.href = link;\n    }\n\n    /**\n     * refresh connection\n     */\n    refresh(){\n        // build link\n        var link = this.config.login.link;\n        for (var param in this.config.login.param) {\n            link += encodeURIComponent(param)+\"=\"\n                +encodeURIComponent(this.config.login.param[param])+\"&\";\n        }\n        link += encodeURIComponent('prompt')+\"=\" //avoid login prompt\n            +encodeURIComponent('none')+\"&\";\n        if (this.id.email)\n            link += encodeURIComponent('login_hint')+\"=\"\n                +encodeURIComponent(this.id.email)+\"&\";\n        link += encodeURIComponent(state)+\"=\"\n            +encode_base64({refresh: true, location: window.location.pathname})+\"&\";\n\n        if(document.getElementById(this.name+\"_refesh\"))\n            return; // avoid multiple refreshs\n\n        // create hidden iframe\n        var iframe = document.createElement('iframe');\n        iframe.id = this.name+\"_refesh\";\n        iframe.style.display = \"none\";\n        iframe.src = link;\n        document.body.appendChild(iframe);\n    }\n\n    /**\n     * perform a request async\n     * @param {*} fun \n     * @param {*} method \n     * @param {*} url \n     * @param {*} body\n     * @param {*} param \n     */\n    request(fun, method, url, body, param){\n        this.requests.push({\n            fun: fun,\n            method: method,\n            url: url,\n            body: body,\n            param: param\n        });\n        this.process_requests();\n    }\n\n    json_request(fun, method, url, body, param){\n        this.requests.push({\n            fun: json_req_handle.bind({conn: this,fun: fun}),\n            method: method,\n            url: url,\n            body: body,\n            param: param\n        });\n        this.process_requests();\n    }\n\n    /**\n     * perform requests\n     */\n    process_requests(){\n        //check for open requests\n        if(this.req)\n            return; \n        var r = this.requests.shift();\n        if (r){\n            this.req = true\n            var req = new XMLHttpRequest();\n            req.open(r.method, r.url, true);\n            req.setRequestHeader(\"Authorization\", \"Bearer \"+this.access_token);\n            map(req.setRequestHeader.bind(req),r.param);\n            req.conn = this;\n            req.fun = r.fun;\n            req.body = r.body;\n            req.onreadystatechange = function(){\n                if(req.readyState === 4 ){\n                    //missing handle refresh error\n                    var header = get_header(req);\n                    req.fun(req.status, req.response, header);\n                    req.conn.req = false;\n                    req.conn.process_requests();\n                }\n            }\n            if (r.body)\n                req.send(r.body);\n            else\n                req.send();\n            return req;\n        }\n    }\n\n\n\n    /**\n     * save config \n     * @param {*} target to save to (default is sessionStorage)\n     */\n    save_config(target = sessionStorage){\n        target.setItem(this.name+CONN_CFG,JSON.stringify(this.config));\n    }\n\n    /**\n     * save state\n     * @param {*} target to save to (default is sessionStorage)\n     */\n    save_state(target = sessionStorage){\n        target.setItem(this.name+CONN_STATE,JSON.stringify({access_token: this.access_token, refresh_token: this.refresh_token, id: this.id}));\n    }\n\n    /**\n     * convert config to a url hash element\n     */\n    config_to_url(){\n        return this.name+CONN_CFG+\"=\"+base64UrlEncode(this.config);\n    }\n\n    load_json_file(title){\n        if(document.getElementById(this.name+'_open_dialog'))\n            return;\n        var box = document.createElement('div');\n        box.id = this.name+'_open_dialog';\n        box.classList.add('prompt');\n        var header = document.createElement('h1');\n        header.innerHTML = title;\n        box.appendChild(header);\n        var input = document.createElement('input');\n        input.type = 'file';\n        box.appendChild(input);\n        var conn = this;\n        input.onchange = function(){\n            open(function(state,cfg){\n                if(state==200){\n                    this.config = JSON.parse(cfg);\n                    this.save_config();\n                } else {\n                    alert('ERRROR: '+ state + '\\n' + cfg)\n                }\n            }.bind(conn), this.files[0]);\n            document.body.removeChild(box);\n        }\n        document.body.appendChild(box);\n    }\n}\n\n\nfunction json_req_handle(state,body,header){\n    if(state === 200) {\n        var json = JSON.parse(body)\n        this.data = (this.data) ? this.data.concat(json.value) : json.value;\n        if(json[\"@odata.nextLink\"]) { // if there is more data\n            this.conn.request(json_req_handle.bind(this),'GET',json[\"@odata.nextLink\"],null,null);\n        } else { //transfer complete\n            this.fun(state,this.data, header);\n        }\n    } else {\n        this.fun(state,(this.data)? this.data:[],header);\n    }\n}","/* Copyright (c) 2018-2020 Benjamin 'Benno' Falkner\n**\n** Permission is hereby granted, free of charge, to any person obtaining a copy\n** of this software and associated documentation files (the \"Software\"), to deal\n** in the Software without restriction, including without limitation the rights\n** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n** copies of the Software, and to permit persons to whom the Software is\n** furnished to do so, subject to the following conditions:\n**\n** The above copyright notice and this permission notice shall be included in all\n** copies or substantial portions of the Software.\n**\n** THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n** SOFTWARE.\n*/\n\nimport { Connection } from './conn';\n\n\nexport {\n    Connection\n}","/** \n* @module jsmat/data\n*/\n\n\nexport function array_map(Fun,Arr){\n    var i, R = new Array(Arr.length);\n    for (i=0;i<Arr.length;i++)\n        R[i] = Fun(Arr[i],i);\n    return R;\n};\n\nexport function array2d_col(arr,idx) {\n    var len = arr.length;\n    var r = new Array(len);\n    for(var i=0; i<len; i++)\n        r[i]=arr[i][idx];\n    return r;\n}\n\n\nexport const cmp ={ \n    number: function(A, B) { return A-B; },\n    string: function(A, B) { return A.localeCompare(B); },\n    any: function(A, B) { return A.toString().localeCompare(B.toString()); }\n}\n\n\nexport class Table {\n\n    constructor(Name, Header){\n        this.name = Name;\n        this.header = Header || [];\n        this.data = [];\n        this.sorted = -1; // sorted column\n    }\n\n    clear() {\n        this.data = [];\n        this.sorted = -1;\n    }\n\n    length() {\n        return this.data.length;\n    }\n\n    add_colum(Name,Data) {\n        this.header.push(Name);\n        var Pos = this.header.length -1;\n        for (var i=0;i<this.data.length; i++){\n            if(Data && Data[i]) {\n                this.data[i][Pos] = Data[i];\n            } else {\n                this.data[i][Pos] = undefined;\n            }\n        }\n    }\n\n    get_colum (name) {\n        var i, r = new Array(this.data.length), col = (typeof name == \"string\") ? this.header.indexOf(name) : name;\n        for( i=0; i<this.data.length; i++){\n            r[i] = this.data[i][col];\n        }\n        return r;\n    }\n\n    map(Fun, target, inputs, start, end){\n        if (end == undefined || end > this.data.length || end < 0) end = this.data.length;\n        if (start == undefined) start = 0;\n            \n        var data = this.data, b;        \n        \n        if(target){\n            if (typeof target == \"string\") target = this.header.indexOf(target);\n            if(inputs){\n                inputs = array_map(function(d){ \n                        return (typeof d == \"string\") ? this.header.indexOf(d) : d; \n                    },inputs);\n                for (var i=start; i<end; i++){\n                    b = array_map( function(ii){return this[ii];}.bind(data[i]),inputs);\n                    data[i][target] = Fun.apply(null,b.concat([data[i],i]));\n                }\n            } else {\n                for (i=offset; i<length; i++){\n                    data[i][target] = Fun(data[i],i);\n                }\n            }\n        } else {\n            for (var i = start; i < end; i++) {\n                data[i] = Fun(data[i],i);\n            }\n        }\n    }\n\n    // deprecated\n    map1(Fun, offset, length) {\n        if (length == undefined || length > this.data.length || length < 0) length = this.data.length;\n        if (offset == undefined) offset = 0;\n        var Data = this.data, i;\n        for (i = offset; i < length; i++) {\n            Data[i] = Fun(Data[i],i);\n        }\n    }\n\n    // deprecated\n    map2(Fun, Target, offset, length){\n        if (length == undefined || length > this.data.length) length = this.data.length;\n        if (offset == undefined) offset = 0;\n        var i, Data = this.data, col = (typeof Target == \"string\") ? this.header.indexOf(Target) : Target;\n        for (i=offset;i<length;i++){\n            Data[i][col] = Fun(Data[i],i);\n        }\n    }\n\n    // deprecated\n    map3(Fun,Target,Inputs, offset, length){\n        if (length == undefined || length > this.data.length) length = this.data.length;\n        if (offset == undefined) offset = 0;\n        var Data = this.data, i, B,\n            In = array_map(function(D){\n                return (typeof D == \"string\") ? this.header.indexOf(D) : D; },Inputs),\n            col = (typeof D == \"string\") ? this.header.indexOf(Target) : Target;\n        for (i=offset;i<length;i++){\n            B = array_map( function(I){return this[I];}.bind(Data[i]),In);\n            Data[i][col] = Fun.apply(null,[Data[i]].concat(B));\n        }\n    }\n\n    fold(Fun, acc, inputs, start, end){\n        if (end == undefined || end > this.data.length || end < 0) end = this.data.length;\n        if (start == undefined) start = 0;\n            \n        var data = this.data, b; \n        if(inputs){\n            inputs = array_map(function(D){\n                return (typeof d == \"string\") ? this.header.indexOf(d) : d; },inputs);\n            for (i = 0; i < Data.length; i++) {\n                b = array_map( function(ii){ return this[ii]; }.bind(Data[i]), inputs);\n                b = [acc].concat(b);\n                acc = Fun.apply(null,b.concat([data[i],i]));\n            }\n        } else {\n            for (var i = 0; i < Keys.length; i++) {\n                acc = Fun(acc,Data[i],i);\n            } \n        }\n        return acc;\n    }\n      \n    // deprecated\n    fold1(Fun, Acc){\n        var Data = this.data, i;\n        for (i = 0; i < Keys.length; i++) {\n            Acc = Fun(Data[i],Acc);\n        }\n        return Acc;\n    }\n\n    // deprecated\n    fold3(Fun, Acc, Inputs) {\n        var Data = this.data, i, B,\n            In = array_map(function(D){\n                return (typeof D == \"string\") ? this.header.indexOf(D) : D; },Inputs);\n        for (i = 0; i < Data.length; i++) {\n            B = array_map( function(I){return this[I];}.bind(Data[i]),In);\n            B.push(Acc);\n            Acc = Fun.apply(null,B);\n        }\n        return Acc;\n    }\n\n    /**\n     * Filter table and create a new table with filtered data\n     * @param {*} Cmp \n     * @param {*} input \n     * @param {*} query \n     */\n    filter(Cmp,input,query){\n        if (typeof input == \"string\") input = this.header.indexOf(input);\n        var out = new Table(this.name+\" filter\",this.header.slice(0));\n        var data = this.data, i;\n        \n        if (input){\n            for (i = 0; i < Data.length; i++) {\n                if (0 == Cmp(Data[i][input],query))\n                    Out.data.push(Data[i]);\n            }\n        } else {\n            for (i = 0; i < Data.length; i++) {\n                if (0 == Cmp(Data[i],query))\n                    Out.data.push(Data[i]);\n            }\n        }\n        return Out;\n    }\n    \n    /**\n     * seclect colums and rows with a filter \n     * @param {*} Fun \n     * @param {*} input \n     * @param {*} query \n     */\n    select(Fun,input,query){\n        var Data = this.data, i, B, R,\n            In = array_map(function(D){\n                return (typeof D == \"string\") ? header.indexOf(D) : D; },Select);\n        var Out = init(this.name+\" filter\",array_map(function(I){return this.header[I]},In));\n        for (i = 0; i < Data.length; i++) {\n            B = array_map( function(I){return this[I];}.bind(Data[i]),In);\n            B.push(Query);\n            R = Fun.apply(null,B);\n            if(R)\n                Out.data.push(R);\n        }\n        return Out;\n    }\n\n    /**\n     * Reduce table \n     * @param {*} Fun \n     * @param {*} input \n     */\n    reduce(Fun,input){\n        var Cidx = (typeof Colum === \"string\" ) ? this.header.indexOf(Colum) : Colum;\n        if (!this.sorted || this.sorted != Cidx)\n            this.sort(Fun,Cidx);\n        var Data = this.data, i;\n        var Last=Data[0][Cidx], Out = new Table(this.name+\" reduce \"+Colum,this.header.slice(0));\n        Out.data.push(Data[0]);\n        for (i = 1; i < Data.length; i++) {\n            if (0 != Fun(Data[i][Cidx],Last))\n                Out.data.push(Data[i]);\n            Last = Data[i][Cidx];\n        }\n        return Out;\n    }\n     \n    //// SORT AND SEARCH WITH HELPERS\n    \n    sort(Fun, Colum){\n        var Cidx = (typeof Colum === \"string\" ) ? this.header.indexOf(Colum) : Colum;\n        var Cmp = function(A,B) {\n            return this.cmp(A[this.idx],B[this.idx]);\n        }\n        this.data = this.data.sort(Cmp.bind({idx: Cidx, cmp: Fun}));\n        this.sorted = Cidx;\n        return Cidx;\n    }\n      \n    search_and_get(Fun,Value,Colum,Key){\n        var Idx = this.search(Fun,Value,Colum);\n        if (Idx >= 0) {\n            var Cidx = (typeof Key === \"string\" ) ? this.header.indexOf(Key) : Key;\n            return this.data[Idx][Cidx];\n        }\n    }\n      \n    search(Fun,Value,Colum){\n        var Cidx;\n        if (typeof Colum === \"string\" )\n            Cidx = this.header.indexOf(Colum);\n        else\n            Cidx = Colum;\n        if( this.sorted && this.sorted == Cidx ){ //binary binsearch\n            return this.binsearch(Fun, Value, Cidx);\n        } else {\n            var i, Data=this.data;\n            for (i=0; i<Data.length; i++){\n                if(0 == Fun(Data[i][Cidx],Value)){\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n      \n    binary_search(Fun,Value,Colum){\n        var Cidx = (typeof Colum === \"string\" ) ? this.header.indexOf(Colum) : Colum;\n        if (!this.sorted || this.sorted != Cidx)\n            sort(Fun,Cidx,this);\n        return this.binsearch(Fun, Value, Cidx);\n    }\n      \n    binsearch(Fun, Value, Cidx){\n        var Left = 0, Right = this.data.length - 1, Mid, R, Data = this.data;\n        while (Left <= Right) { // Interval\n          Mid = Left + ((Right - Left) / 2); // half interval\n          //console.log(Value,Data[Mid]);\n          R = Fun(Value,Data[Mid][Cidx]);\n          if (R == 0) // success\n            return Mid;\n          else\n            if (R < 0) // lower interval\n              Right = Mid - 1;\n            else // higher interval\n              Left = Mid + 1;\n        }\n        return -1;\n    }\n\n    get_row_obj(Row){\n        var Obj = {};\n        for(var i=0; i<this.header.length; i++){\n            Obj[this.header[i]] = this.data[Row][i];\n        }\n        return Obj\n    }\n\n    add_row_obj(Obj,Idx = -1) {\n        var Keys = Object.keys(Obj);\n        if (Idx < 0){\n            Idx = this.data.length;\n            this.data.push(new Array(this.header.length));\n        }\n\n        for(var i=0; i<Keys.length; i++ ){\n            var Pos = this.header.indexOf(Keys[i]);\n            if(Pos == -1){\n                console.log(\"TR_Table: Missing key: \"+Keys[i]);\n            } else {\n                this.data[Idx][Pos] = Obj[Keys[i]];\n            }\n        }\n    }\n     \n    add_obj_array(Obj) {\n         var i,j, L, Keys, Idx;\n         for(i=0; i<Obj.length; i++){\n            L = new Array(this.header.length);\n            Keys = Object.keys(Obj[i]);\n            for(j=0; j<Keys.length; j++ ){\n                Idx = this.header.indexOf(Keys[j]);\n                if (Idx >=0 ) {\n                    L[Idx] = Obj[i][Keys[j]];\n                }\n            }\n            this.data.push(L);\n        }\n    }\n\n    read_json(text) {\n        var l, i, j, json = JSON.parse(text);\n        for(i=0; i < json.length; i++){\n            l = new Array(this.header.length);\n            for(j=0; j<this.header.length; j++ ){\n                l[j] = json[i][this.header[j]];\n            }\n            this.data.push(l);\n        }\n        \n    }\n\n    read_csv(Text, FS, No_Header) {\n        var Last_Char = \"\", Field = \"\", Obj = [\"\"], Col = 0, Row = 0, No_Quote = !0, C, j, First_Row = (No_Header)? 0 : !0;\n        this.data = [];\n        this.header = [];\n        this.sorted = -1;\n        this.data.push(Obj);\n    \n        for (j = 0; j < Text.length; j++) {\n            C = Text[j]; //get current char\n            if (\"\\\"\" === C) { // if quote\n                if (No_Quote && C === Last_Char)\n                    Field += C; // if previous was a quote add quote to field string\n                No_Quote = !No_Quote; // switch boolean\n            }\n            else if (FS === C && No_Quote) { // if not quoted FS\n                if (First_Row) {\n                    this.header[Col++] = Field;\n                }\n                else {\n                    Obj[Col++] = Field;\n                }\n                C = Field = \"\";\n            }\n            else if (\"\\n\" === C && No_Quote) { // if not quoted line end\n                    if (\"\\r\" === Last_Char)\n                        Field = Field.slice(0, -1); //remove carriage return\n                    if (First_Row) {\n                        First_Row = !First_Row;\n                        this.header[Col] = Field;\n                        C = Field = \"\";\n                    }\n                    else {\n                        Obj[Col] = Field;\n                        this.data[++Row] = Obj = [];\n                    }\n                    C = Field = \"\";\n                    Col = 0;\n                }\n                else {\n                    Field += C;\n                }\n                Last_Char = C;\n        }\n        if (Col != 0) {\n            Obj[Col] = Field;\n        }\n        if (Obj.length != this.header.length)\n            this.data.pop();\n    }\n    \n    write_csv(FS) {\n        var text = \"\", row;\n        if (this.header) {\n            for (var i = 0; i < this.header.length; i++) {\n                if (i > 0)\n                    text += FS;\n                text += escape_csv(this.header[i], FS);\n            }\n            text += \"\\r\\n\";\n        }\n        for (var i = 0; i < this.data.length; i++) {\n            row = this.data[i];\n            for (var j = 0; j < row.length; j++) {\n                if (j > 0)\n                    text += FS;\n                text += escape_csv(str(row[j]), FS);\n            }\n            text += \"\\r\\n\";\n        }\n        return text;\n    }\n\n    open_csv(fun, file) {\n        var reader = new FileReader();\n        reader.onload = function(event) {\n            this.read_csv(event.target.result, ';')\n            fun();\n        };\n        reader.onerror = function(event) {\n            alert(event.target.error);\n        };\n        reader.readAsText(file);\n    }\n\n    save_csv(){\n        var file_link = document.createElement('a');\n        file_link.setAttribute('href', 'data: text/csv,' + encodeURIComponent(this.write_csv(';')));\n        if (document.createEvent) {\n            var event = document.createEvent('MouseEvents');\n            event.initEvent('click', true, true);\n            file_link.dispatchEvent(event);\n        } else {\n            file_link.click();\n        }\n    }\n};\n\n\n\n// HELPER FUNCTIONS\n\nfunction escape_csv(Value, FS) {\n    var R = \"\", C, Esc = false;\n    if (!Value)\n        return \"\";\n    for (var j = 0; j < Value.length; j++) {\n        C = Value[j];\n        if (C == \"\\\"\") {\n            R += C;\n            R += C;\n            Esc = true;\n        }\n        else if (C == \"\\n\" || C == \"\\r\" || C == FS) {\n            R += C;\n            Esc = true;\n        }\n        else {\n            R += C;\n        }\n    }\n    if (Esc) {\n        return \"\\\"\" + R + \"\\\"\";\n    }\n    else {\n        return R;\n    }\n}\n\nfunction str(o) {\n    switch (o) {\n        case null:\n          return \"null\";\n        case undefined:\n          return \"undefined\";\n        default:\n          return o.toString();\n    }\n}","\nimport {Table} from './table';\n\nexport class TableView {\n\n    constructor(table, target){\n        this.table = table \n        if(typeof target == 'string')\n            target = document.querySelector(target);\n        this.target = target\n    }\n\n    draw(){\n        var caption = this.target.querySelector('caption').innerHTML;\n        var tab = this.target;\n        tab.innerHTML = \"\";\n        var cell, chk, row = document.createElement('tr');\n        cell = document.createElement('td');\n        chk = document.createElement('input');\n        chk.type = \"checkbox\"; \n        chk.name = this.target.id+\"_chk_all\"; \n        chk.id =  chk.name; \n        cell.appendChild(chk)\n        row.appendChild(cell);\n        for(var i=0;i<this.table.header.length;i++){\n            cell = document.createElement('th');\n            cell.innerText = this.table.header[i];\n            row.appendChild(cell);\n        }\n        tab.appendChild(row);\n        for(var i=0; i<this.table.length(); i++){\n            row = document.createElement('tr');\n            cell = document.createElement('td');\n            chk = document.createElement('input');\n            chk.type = \"checkbox\"; \n            chk.name = this.target.id+\"_chk_\"+i+\"_\"+j; \n            chk.id =  chk.name; \n            cell.appendChild(chk)\n            row.appendChild(cell);\n            for(var j=0; j<this.table.header.length; j++){\n                cell = document.createElement('td');\n                cell.innerText = this.table.data[i][j];\n                row.appendChild(cell);\n            }\n            tab.appendChild(row);\n\n            tab.onclick(this.on_click)\n        }\n    }\n\n    update(){}\n\n    on_click(e){\n        console.log(e);\n    }\n}"],"sourceRoot":""}